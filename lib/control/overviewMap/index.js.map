{"version":3,"file":"index.js","sources":["src/components/control/overviewMap/VcOverviewMap.vue?rollup-plugin-vue=script.js","src/components/control/overviewMap/VcOverviewMap.vue","src/components/control/overviewMap/index.js"],"sourcesContent":["//\n//\n//\n//\n\nimport cmp from '../../../mixins/virtualCmp'\nimport CesiumOverviewMapControl from '../../../exts/overviewMapControl/CesiumOverviewMapControl'\nimport '../../../assets/styles/components/overviewmap.scss'\nimport { TileLayer } from 'leaflet/dist/leaflet-src.esm'\nimport 'leaflet/dist/leaflet.css'\nexport default {\n  name: 'vc-map-overview',\n  mixins: [cmp],\n  props: {\n    url: {\n      type: String,\n      default: 'https://webst01.is.autonavi.com/appmaptile?style=7&x={x}&y={y}&z={z}'\n    },\n    height: {\n      type: Number,\n      default: 150\n    },\n    width: {\n      type: Number,\n      default: 150\n    },\n    anchor: {\n      type: String,\n      default: 'bottomright'\n    },\n    aimingRectOptions: {\n      type: Object,\n      default: () => {\n        return {\n          color: '#ff1100',\n          weight: 3\n        }\n      }\n    },\n    shadowRectOptions: {\n      type: Object,\n      default: () => {\n        return {\n          color: '#0000AA',\n          weight: 1,\n          opacity: 0,\n          fillOpacity: 0\n        }\n      }\n    },\n    toggleDisplay: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data () {\n    return {\n      bottom: 10,\n      right: 10,\n      top: 50,\n      left: 10,\n      canRender: false\n    }\n  },\n  computed: {\n    ovStyle: function () {\n      const { anchor, height, width, top, left, right, bottom } = this\n      const style = {\n        height: height + 'px',\n        width: width + 'px'\n      }\n\n      if (anchor === 'topleft') {\n        style.top = top + 'px'\n        style.left = left + 'px'\n      }\n\n      if (anchor === 'topright') {\n        style.top = top + 'px'\n        style.right = right + 'px'\n      }\n\n      if (anchor === 'bottomright') {\n        style.bottom = bottom + 'px'\n        style.right = right + 'px'\n      }\n\n      if (anchor === 'bottomleft') {\n        style.bottom = bottom + 'px'\n        style.left = left + 'px'\n      }\n\n      return style\n    }\n  },\n  methods: {\n    async createCesiumObject () {\n      this.canRender = true\n      return new Promise((resolve, reject) => {\n        this.$nextTick(() => {\n          const { viewer, width, height, anchor, aimingRectOptions, shadowRectOptions, toggleDisplay } = this\n          const layer = new TileLayer(this.url, {\n            minZoom: 0,\n            maxZoom: 20\n          })\n          const container = this.$refs.leafletContainer\n          const options = {\n            container: container,\n            toggleDisplay: toggleDisplay,\n            width: width,\n            height: height,\n            position: anchor,\n            aimingRectOptions: aimingRectOptions,\n            shadowRectOptions: shadowRectOptions\n          }\n          viewer.widgetResized.addEventListener(this.widgetResized)\n          this.widgetResized()\n          resolve(new CesiumOverviewMapControl(viewer, layer, options, this))\n        })\n      })\n    },\n    widgetResized () {\n      let bottom = 10\n      let right = 10\n      const { viewer, anchor } = this\n      this.$nextTick(() => {\n        if (anchor === 'bottomright') {\n          if (viewer.timeline) {\n            bottom += viewer.timeline.container.getBoundingClientRect().height\n          }\n          const vcDistance = document.querySelector('.vc-location-distance')\n          if (vcDistance) {\n            bottom += vcDistance.getBoundingClientRect().height\n          }\n        } else if (anchor === 'bottomleft') {\n          if (viewer.animation) {\n            bottom += viewer.animation.container.getBoundingClientRect().height\n          } else {\n            if (viewer.bottomContainer) {\n              bottom += viewer.bottomContainer.getBoundingClientRect().height\n            }\n            if (viewer.timeline) {\n              bottom += viewer.timeline.container.getBoundingClientRect().height\n            }\n          }\n        }\n\n        if (anchor === 'topright') {\n          const navigationNavs = document.querySelector('.vc-navigation-navs')\n          if (navigationNavs) {\n            right += navigationNavs.getBoundingClientRect().width + 16\n          }\n        }\n\n        if (bottom === 10) {\n          let right = 10\n          viewer.fullscreenButton && (right += viewer.fullscreenButton.container.getBoundingClientRect().width)\n          viewer.vrButton && (right += viewer.vrButton.container.getBoundingClientRect().width)\n        }\n\n        this.bottom = bottom\n        this.right = right\n      })\n    },\n    async mount () {\n      return true\n    },\n    async unmount () {\n      this.viewer.widgetResized.removeEventListener(this.widgetResized)\n      this.canRender = false\n      return true\n    }\n  },\n  created () {\n    Object.defineProperties(this, {\n      element: {\n        enumerable: true,\n        get: () => this.cesiumObject\n      }\n    })\n  }\n}\n","<template>\n  <div :style=\"ovStyle\" class=\"vc-leaflet-control-minimap\" id=\"vc-overview-map\" ref=\"leafletContainer\" v-if=\"canRender\"></div>\n</template>\n\n<script>\nimport cmp from '../../../mixins/virtualCmp'\nimport CesiumOverviewMapControl from '../../../exts/overviewMapControl/CesiumOverviewMapControl'\nimport '../../../assets/styles/components/overviewmap.scss'\nimport { TileLayer } from 'leaflet/dist/leaflet-src.esm'\nimport 'leaflet/dist/leaflet.css'\nexport default {\n  name: 'vc-map-overview',\n  mixins: [cmp],\n  props: {\n    url: {\n      type: String,\n      default: 'https://webst01.is.autonavi.com/appmaptile?style=7&x={x}&y={y}&z={z}'\n    },\n    height: {\n      type: Number,\n      default: 150\n    },\n    width: {\n      type: Number,\n      default: 150\n    },\n    anchor: {\n      type: String,\n      default: 'bottomright'\n    },\n    aimingRectOptions: {\n      type: Object,\n      default: () => {\n        return {\n          color: '#ff1100',\n          weight: 3\n        }\n      }\n    },\n    shadowRectOptions: {\n      type: Object,\n      default: () => {\n        return {\n          color: '#0000AA',\n          weight: 1,\n          opacity: 0,\n          fillOpacity: 0\n        }\n      }\n    },\n    toggleDisplay: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data () {\n    return {\n      bottom: 10,\n      right: 10,\n      top: 50,\n      left: 10,\n      canRender: false\n    }\n  },\n  computed: {\n    ovStyle: function () {\n      const { anchor, height, width, top, left, right, bottom } = this\n      const style = {\n        height: height + 'px',\n        width: width + 'px'\n      }\n\n      if (anchor === 'topleft') {\n        style.top = top + 'px'\n        style.left = left + 'px'\n      }\n\n      if (anchor === 'topright') {\n        style.top = top + 'px'\n        style.right = right + 'px'\n      }\n\n      if (anchor === 'bottomright') {\n        style.bottom = bottom + 'px'\n        style.right = right + 'px'\n      }\n\n      if (anchor === 'bottomleft') {\n        style.bottom = bottom + 'px'\n        style.left = left + 'px'\n      }\n\n      return style\n    }\n  },\n  methods: {\n    async createCesiumObject () {\n      this.canRender = true\n      return new Promise((resolve, reject) => {\n        this.$nextTick(() => {\n          const { viewer, width, height, anchor, aimingRectOptions, shadowRectOptions, toggleDisplay } = this\n          const layer = new TileLayer(this.url, {\n            minZoom: 0,\n            maxZoom: 20\n          })\n          const container = this.$refs.leafletContainer\n          const options = {\n            container: container,\n            toggleDisplay: toggleDisplay,\n            width: width,\n            height: height,\n            position: anchor,\n            aimingRectOptions: aimingRectOptions,\n            shadowRectOptions: shadowRectOptions\n          }\n          viewer.widgetResized.addEventListener(this.widgetResized)\n          this.widgetResized()\n          resolve(new CesiumOverviewMapControl(viewer, layer, options, this))\n        })\n      })\n    },\n    widgetResized () {\n      let bottom = 10\n      let right = 10\n      const { viewer, anchor } = this\n      this.$nextTick(() => {\n        if (anchor === 'bottomright') {\n          if (viewer.timeline) {\n            bottom += viewer.timeline.container.getBoundingClientRect().height\n          }\n          const vcDistance = document.querySelector('.vc-location-distance')\n          if (vcDistance) {\n            bottom += vcDistance.getBoundingClientRect().height\n          }\n        } else if (anchor === 'bottomleft') {\n          if (viewer.animation) {\n            bottom += viewer.animation.container.getBoundingClientRect().height\n          } else {\n            if (viewer.bottomContainer) {\n              bottom += viewer.bottomContainer.getBoundingClientRect().height\n            }\n            if (viewer.timeline) {\n              bottom += viewer.timeline.container.getBoundingClientRect().height\n            }\n          }\n        }\n\n        if (anchor === 'topright') {\n          const navigationNavs = document.querySelector('.vc-navigation-navs')\n          if (navigationNavs) {\n            right += navigationNavs.getBoundingClientRect().width + 16\n          }\n        }\n\n        if (bottom === 10) {\n          let right = 10\n          viewer.fullscreenButton && (right += viewer.fullscreenButton.container.getBoundingClientRect().width)\n          viewer.vrButton && (right += viewer.vrButton.container.getBoundingClientRect().width)\n        }\n\n        this.bottom = bottom\n        this.right = right\n      })\n    },\n    async mount () {\n      return true\n    },\n    async unmount () {\n      this.viewer.widgetResized.removeEventListener(this.widgetResized)\n      this.canRender = false\n      return true\n    }\n  },\n  created () {\n    Object.defineProperties(this, {\n      element: {\n        enumerable: true,\n        get: () => this.cesiumObject\n      }\n    })\n  }\n}\n</script>\n","import VcOverviewMap from './VcOverviewMap.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  Vue.component(VcOverviewMap.name, VcOverviewMap)\n}\n\nexport default plugin\n\nexport {\n  VcOverviewMap,\n  plugin as install\n}\n"],"names":["name","mixins","cmp","props","url","type","String","default","height","Number","width","anchor","aimingRectOptions","Object","color","weight","shadowRectOptions","opacity","fillOpacity","toggleDisplay","Boolean","data","bottom","right","top","left","canRender","computed","ovStyle","style","methods","createCesiumObject","resolve","reject","$nextTick","viewer","layer","TileLayer","minZoom","maxZoom","container","$refs","leafletContainer","options","position","widgetResized","addEventListener","CesiumOverviewMapControl","timeline","getBoundingClientRect","vcDistance","document","querySelector","animation","bottomContainer","navigationNavs","fullscreenButton","vrButton","mount","unmount","removeEventListener","created","defineProperties","element","enumerable","get","cesiumObject","plugin","Vue","installed","component","VcOverviewMap"],"mappings":"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"}