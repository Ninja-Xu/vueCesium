{"version":3,"file":"index.js","sources":["src/components/extend/doubleCircleRipple/VcDoubleCircleRipple.vue?rollup-plugin-vue=script.js","src/components/extend/doubleCircleRipple/VcDoubleCircleRipple.vue","src/components/extend/doubleCircleRipple/index.js"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport cmp from '../../../mixins/virtualCmp'\nimport { position, show, color, height } from '../../../mixins/mixinProps'\nimport { makeColor } from '../../../utils/cesiumHelpers'\nexport default {\n  name: 'vc-ripple-circle-double',\n  mixins: [cmp, position, show, color, height],\n  props: {\n    minRadius: {\n      type: Number,\n      default: 0.1\n    },\n    maxRadius: {\n      type: Number,\n      default: 3000\n    },\n    deviationRadius: {\n      type: Number,\n      default: 40\n    },\n    interval: {\n      type: Number,\n      default: 1000\n    },\n    imageUrl: String\n  },\n  data () {\n    return {\n      material: {},\n      radius1: undefined,\n      radius2: undefined\n    }\n  },\n  methods: {\n    async createCesiumObject () {\n      this.init()\n      return Promise.all([this.$refs.entity1, this.$refs.entity2])\n    },\n    init () {\n      const { minRadius, maxRadius, imageUrl, interval, changeRadius1, changeRadius2, color } = this\n      const cesiumColor = makeColor(color)\n      this.r1 = minRadius\n      this.r2 = minRadius\n      this.material = {\n        fabric: {\n          type: 'Image',\n          uniforms: {\n            image: imageUrl,\n            transparent: true,\n            color: () => {\n              return cesiumColor.withAlpha(1 - this.r1 / maxRadius) // entity的颜色透明 并不影响材质，并且 entity也会透明哦\n            }\n          }\n        }\n      }\n      this.radius1 = changeRadius1\n      setTimeout(() => {\n        this.radius2 = changeRadius2\n      }, interval)\n    },\n    async mount () {\n      return true\n    },\n    async unmount () {\n      this.radius1 = 0\n      this.radius2 = 0\n      return true\n    },\n    changeRadius1 () {\n      const { deviationRadius, maxRadius, minRadius } = this\n      if (!this.flag1) {\n        this.r1 += deviationRadius\n        if (this.r1 >= maxRadius) {\n          this.r1 = minRadius\n        }\n        this.flag1 = true\n      } else {\n        this.flag1 = false\n      }\n\n      return this.r1\n    },\n    changeRadius2 () {\n      const { deviationRadius, maxRadius, minRadius } = this\n      if (!this.flag2) {\n        this.r2 += deviationRadius\n        if (this.r2 >= maxRadius) {\n          this.r2 = minRadius\n        }\n\n        this.flag2 = true\n      } else {\n        this.flag2 = false\n      }\n      return this.r2\n    }\n  },\n  created () {\n    Object.defineProperties(this, {\n      entities: {\n        enumerable: true,\n        get: () => this.cesiumObject\n      }\n    })\n  }\n}\n","<template>\n  <i :class=\"$options.name\" style=\"display: none !important\">\n    <vc-entity :position=\"position\" :show=\"show\" ref=\"entity1\">\n      <vc-graphics-ellipse\n        :height=\"height\"\n        :material=\"material\"\n        :semiMajorAxis=\"radius1\"\n        :semiMinorAxis=\"radius1\"\n      ></vc-graphics-ellipse>\n    </vc-entity>\n    <vc-entity :position=\"position\" :show=\"show\" ref=\"entity2\">\n      <vc-graphics-ellipse\n        :height=\"height\"\n        :material=\"material\"\n        :semiMajorAxis=\"radius2\"\n        :semiMinorAxis=\"radius2\"\n      ></vc-graphics-ellipse>\n    </vc-entity>\n  </i>\n</template>\n\n<script>\nimport cmp from '../../../mixins/virtualCmp'\nimport { position, show, color, height } from '../../../mixins/mixinProps'\nimport { makeColor } from '../../../utils/cesiumHelpers'\nexport default {\n  name: 'vc-ripple-circle-double',\n  mixins: [cmp, position, show, color, height],\n  props: {\n    minRadius: {\n      type: Number,\n      default: 0.1\n    },\n    maxRadius: {\n      type: Number,\n      default: 3000\n    },\n    deviationRadius: {\n      type: Number,\n      default: 40\n    },\n    interval: {\n      type: Number,\n      default: 1000\n    },\n    imageUrl: String\n  },\n  data () {\n    return {\n      material: {},\n      radius1: undefined,\n      radius2: undefined\n    }\n  },\n  methods: {\n    async createCesiumObject () {\n      this.init()\n      return Promise.all([this.$refs.entity1, this.$refs.entity2])\n    },\n    init () {\n      const { minRadius, maxRadius, imageUrl, interval, changeRadius1, changeRadius2, color } = this\n      const cesiumColor = makeColor(color)\n      this.r1 = minRadius\n      this.r2 = minRadius\n      this.material = {\n        fabric: {\n          type: 'Image',\n          uniforms: {\n            image: imageUrl,\n            transparent: true,\n            color: () => {\n              return cesiumColor.withAlpha(1 - this.r1 / maxRadius) // entity的颜色透明 并不影响材质，并且 entity也会透明哦\n            }\n          }\n        }\n      }\n      this.radius1 = changeRadius1\n      setTimeout(() => {\n        this.radius2 = changeRadius2\n      }, interval)\n    },\n    async mount () {\n      return true\n    },\n    async unmount () {\n      this.radius1 = 0\n      this.radius2 = 0\n      return true\n    },\n    changeRadius1 () {\n      const { deviationRadius, maxRadius, minRadius } = this\n      if (!this.flag1) {\n        this.r1 += deviationRadius\n        if (this.r1 >= maxRadius) {\n          this.r1 = minRadius\n        }\n        this.flag1 = true\n      } else {\n        this.flag1 = false\n      }\n\n      return this.r1\n    },\n    changeRadius2 () {\n      const { deviationRadius, maxRadius, minRadius } = this\n      if (!this.flag2) {\n        this.r2 += deviationRadius\n        if (this.r2 >= maxRadius) {\n          this.r2 = minRadius\n        }\n\n        this.flag2 = true\n      } else {\n        this.flag2 = false\n      }\n      return this.r2\n    }\n  },\n  created () {\n    Object.defineProperties(this, {\n      entities: {\n        enumerable: true,\n        get: () => this.cesiumObject\n      }\n    })\n  }\n}\n</script>\n","import VcDoubleCircleRipple from './VcDoubleCircleRipple.vue'\n// 按需引入该组件时自动引入下面组件才能正常工作\nimport * as Entity from '../../entity'\nimport * as EllipseGraphics from '../../entity/ellipse'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  Vue.use(Entity)\n  Vue.use(EllipseGraphics)\n\n  Vue.component(VcDoubleCircleRipple.name, VcDoubleCircleRipple)\n}\n\nexport default plugin\n\nexport {\n  VcDoubleCircleRipple,\n  plugin as install\n}\n"],"names":["name","mixins","cmp","position","show","color","height","props","minRadius","type","Number","default","maxRadius","deviationRadius","interval","imageUrl","String","data","material","radius1","undefined","radius2","methods","createCesiumObject","init","all","$refs","entity1","entity2","changeRadius1","changeRadius2","cesiumColor","makeColor","r1","r2","fabric","uniforms","image","transparent","withAlpha","setTimeout","mount","unmount","flag1","flag2","created","Object","defineProperties","entities","enumerable","get","cesiumObject","plugin","Vue","installed","use","Entity","EllipseGraphics","component","VcDoubleCircleRipple"],"mappings":";;;;;;;;;;;;;;;;;;;;AAyBA,aAAe;AACbA,EAAAA,IAAI,EAAE,yBADO;AAEbC,EAAAA,MAAM,EAAE,CAACC,GAAD,EAAMC,QAAN,EAAgBC,IAAhB,EAAsBC,KAAtB,EAA6BC,MAA7B,CAFK;AAGbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,SAAS,EAAE;AACTC,MAAAA,IAAI,EAAEC,MADG;AAETC,MAAAA,OAAO,EAAE;AAFA,KADN;AAKLC,IAAAA,SAAS,EAAE;AACTH,MAAAA,IAAI,EAAEC,MADG;AAETC,MAAAA,OAAO,EAAE;AAFA,KALN;AASLE,IAAAA,eAAe,EAAE;AACfJ,MAAAA,IAAI,EAAEC,MADS;AAEfC,MAAAA,OAAO,EAAE;AAFM,KATZ;AAaLG,IAAAA,QAAQ,EAAE;AACRL,MAAAA,IAAI,EAAEC,MADE;AAERC,MAAAA,OAAO,EAAE;AAFD,KAbL;AAiBLI,IAAAA,QAAQ,EAAEC;AAjBL,GAHM;AAsBbC,EAAAA,IAtBa,kBAsBL;AACN,WAAO;AACLC,MAAAA,QAAQ,EAAE,EADL;AAELC,MAAAA,OAAO,EAAEC,SAFJ;AAGLC,MAAAA,OAAO,EAAED;AAHJ,KAAP;AAKD,GA5BY;AA6BbE,EAAAA,OAAO,EAAE;AACDC,IAAAA,kBADC,gCACqB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1B,gBAAA,KAAI,CAACC,IAAL;;AAD0B,iDAEnB,SAAQC,GAAR,CAAY,CAAC,KAAI,CAACC,KAAL,CAAWC,OAAZ,EAAqB,KAAI,CAACD,KAAL,CAAWE,OAAhC,CAAZ,CAFmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAG3B,KAJM;AAKPJ,IAAAA,IALO,kBAKC;AAAA;;AACN,UAAQhB,SAAR,GAA0F,IAA1F,CAAQA,SAAR;AAAA,UAAmBI,SAAnB,GAA0F,IAA1F,CAAmBA,SAAnB;AAAA,UAA8BG,QAA9B,GAA0F,IAA1F,CAA8BA,QAA9B;AAAA,UAAwCD,QAAxC,GAA0F,IAA1F,CAAwCA,QAAxC;AAAA,UAAkDe,aAAlD,GAA0F,IAA1F,CAAkDA,aAAlD;AAAA,UAAiEC,aAAjE,GAA0F,IAA1F,CAAiEA,aAAjE;AAAA,UAAgFzB,KAAhF,GAA0F,IAA1F,CAAgFA,KAAhF;AACA,UAAM0B,WAAW,GAAGC,SAAS,CAAC3B,KAAD,CAA7B;AACA,WAAK4B,EAAL,GAAUzB,SAAV;AACA,WAAK0B,EAAL,GAAU1B,SAAV;AACA,WAAKU,QAAL,GAAgB;AACdiB,QAAAA,MAAM,EAAE;AACN1B,UAAAA,IAAI,EAAE,OADA;AAEN2B,UAAAA,QAAQ,EAAE;AACRC,YAAAA,KAAK,EAAEtB,QADC;AAERuB,YAAAA,WAAW,EAAE,IAFL;AAGRjC,YAAAA,KAAK,EAAE,iBAAM;AACX,qBAAO0B,WAAW,CAACQ,SAAZ,CAAsB,IAAI,MAAI,CAACN,EAAL,GAAUrB,SAApC,CAAP,CADW;AAEZ;AALO;AAFJ;AADM,OAAhB;AAYA,WAAKO,OAAL,GAAeU,aAAf;AACAW,MAAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAACnB,OAAL,GAAeS,aAAf;AACD,OAFS,EAEPhB,QAFO,CAAV;AAGD,KA1BM;AA2BD2B,IAAAA,KA3BC,mBA2BQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDACN,IADM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEd,KA7BM;AA8BDC,IAAAA,OA9BC,qBA8BU;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACf,gBAAA,MAAI,CAACvB,OAAL,GAAe,CAAf;AACA,gBAAA,MAAI,CAACE,OAAL,GAAe,CAAf;AAFe,kDAGR,IAHQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIhB,KAlCM;AAmCPQ,IAAAA,aAnCO,2BAmCU;AACf,UAAQhB,eAAR,GAAkD,IAAlD,CAAQA,eAAR;AAAA,UAAyBD,SAAzB,GAAkD,IAAlD,CAAyBA,SAAzB;AAAA,UAAoCJ,SAApC,GAAkD,IAAlD,CAAoCA,SAApC;;AACA,UAAI,CAAC,KAAKmC,KAAV,EAAiB;AACf,aAAKV,EAAL,IAAWpB,eAAX;;AACA,YAAI,KAAKoB,EAAL,IAAWrB,SAAf,EAA0B;AACxB,eAAKqB,EAAL,GAAUzB,SAAV;AACD;;AACD,aAAKmC,KAAL,GAAa,IAAb;AACD,OAND,MAMO;AACL,aAAKA,KAAL,GAAa,KAAb;AACD;;AAED,aAAO,KAAKV,EAAZ;AACD,KAhDM;AAiDPH,IAAAA,aAjDO,2BAiDU;AACf,UAAQjB,eAAR,GAAkD,IAAlD,CAAQA,eAAR;AAAA,UAAyBD,SAAzB,GAAkD,IAAlD,CAAyBA,SAAzB;AAAA,UAAoCJ,SAApC,GAAkD,IAAlD,CAAoCA,SAApC;;AACA,UAAI,CAAC,KAAKoC,KAAV,EAAiB;AACf,aAAKV,EAAL,IAAWrB,eAAX;;AACA,YAAI,KAAKqB,EAAL,IAAWtB,SAAf,EAA0B;AACxB,eAAKsB,EAAL,GAAU1B,SAAV;AACD;;AAED,aAAKoC,KAAL,GAAa,IAAb;AACD,OAPD,MAOO;AACL,aAAKA,KAAL,GAAa,KAAb;AACD;;AACD,aAAO,KAAKV,EAAZ;AACD;AA9DM,GA7BI;AA6FbW,EAAAA,OA7Fa,qBA6FF;AAAA;;AACTC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,IAAxB,EAA8B;AAC5BC,MAAAA,QAAQ,EAAE;AACRC,QAAAA,UAAU,EAAE,IADJ;AAERC,QAAAA,GAAG,EAAE;AAAA,iBAAM,MAAI,CAACC,YAAX;AAAA;AAFG;AADkB,KAA9B;AAMD;AApGY,CAAf;;;ACtBY,2BAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEZ,SAASC,MAAT,CAAiBC,GAAjB,EAAoC;AAAA;AAClC,MAAID,MAAM,CAACE,SAAX,EAAsB;AACpB;AACD;;AACDF,EAAAA,MAAM,CAACE,SAAP,GAAmB,IAAnB;AAEAD,EAAAA,GAAG,CAACE,GAAJ,CAAQC,MAAR;AACAH,EAAAA,GAAG,CAACE,GAAJ,CAAQE,eAAR;AAEAJ,EAAAA,GAAG,CAACK,SAAJ,CAAcC,oBAAoB,CAAC3D,IAAnC,EAAyC2D,oBAAzC;AACD;;;;;"}