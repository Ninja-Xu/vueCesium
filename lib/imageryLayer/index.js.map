{"version":3,"file":"index.js","sources":["src/components/imageryLayer/ImageryLayer.vue?rollup-plugin-vue=script.js","src/components/imageryLayer/ImageryLayer.vue","src/components/imageryLayer/index.js"],"sourcesContent":["\nimport { cutoutRectangle, colorToAlpha } from '../../mixins/mixinProps'\nimport mergeDescriptors from '../../utils/mergeDescriptors'\nimport cmp from '../../mixins/virtualCmp'\nexport default {\n  name: 'vc-layer-imagery',\n  mixins: [cmp, cutoutRectangle, colorToAlpha],\n  props: {\n    imageryProvider: Object,\n    rectangle: Object,\n    alpha: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    brightness: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    contrast: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    hue: {\n      type: [Number, Function],\n      default: 0.0\n    },\n    saturation: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    gamma: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    splitDirection: Number,\n    minificationFilter: Number,\n    magnificationFilter: Number,\n    show: {\n      type: Boolean,\n      default: true\n    },\n    maximumAnisotropy: Number,\n    minimumTerrainLevel: Number,\n    maximumTerrainLevel: Number,\n    colorToAlphaThreshold: {\n      type: Number,\n      default: 0.004\n    },\n    sortOrder: Number\n  },\n  methods: {\n    /**\n     * ImageryLayer 初始化方式较为特殊，这儿覆盖重写 createCesiumObject 方法。\n     */\n    async createCesiumObject () {\n      const { $props, transformProps, requiredArg } = this\n      const options = transformProps($props)\n      return new Cesium.ImageryLayer(requiredArg || {}, options)\n    },\n    async mount () {\n      const { viewer, imageryLayer, sortOrder } = this\n      imageryLayer.sortOrder = sortOrder\n      viewer.imageryLayers.add(imageryLayer)\n      return !this.viewer.isDestroyed() && viewer.imageryLayers.contains(imageryLayer)\n    },\n    async unmount () {\n      const { viewer, imageryLayer } = this\n      return !viewer.isDestroyed() && viewer.imageryLayers.remove(imageryLayer)\n    },\n    setProvider (provider) {\n      if (undefined === provider) {\n        this.unmount()\n      } else {\n        this.imageryLayer._imageryProvider = provider\n        const listener = this.$listeners['update:imageryProvider']\n        if (listener) this.$emit('update:imageryProvider', provider)\n      }\n\n      return true\n    },\n    getServices () {\n      const vm = this\n      return mergeDescriptors(\n        cmp.methods.getServices.call(this),\n        {\n          get imageryLayer () { return vm.imageryLayer },\n          get providerContainer () { return vm }\n        }\n      )\n    }\n  },\n  stubVNode: {\n    attrs () {\n      return {\n        class: this.$options.name\n      }\n    }\n  },\n  created () {\n    this._provider = undefined\n    Object.defineProperties(this, {\n      imageryLayer: {\n        enumerable: true,\n        get: () => this.cesiumObject\n      },\n      requiredArg: {\n        enumerable: true,\n        get: () => this.imageryProvider || this._provider\n      }\n    })\n  }\n}\n","<script>\nimport { cutoutRectangle, colorToAlpha } from '../../mixins/mixinProps'\nimport mergeDescriptors from '../../utils/mergeDescriptors'\nimport cmp from '../../mixins/virtualCmp'\nexport default {\n  name: 'vc-layer-imagery',\n  mixins: [cmp, cutoutRectangle, colorToAlpha],\n  props: {\n    imageryProvider: Object,\n    rectangle: Object,\n    alpha: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    brightness: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    contrast: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    hue: {\n      type: [Number, Function],\n      default: 0.0\n    },\n    saturation: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    gamma: {\n      type: [Number, Function],\n      default: 1.0\n    },\n    splitDirection: Number,\n    minificationFilter: Number,\n    magnificationFilter: Number,\n    show: {\n      type: Boolean,\n      default: true\n    },\n    maximumAnisotropy: Number,\n    minimumTerrainLevel: Number,\n    maximumTerrainLevel: Number,\n    colorToAlphaThreshold: {\n      type: Number,\n      default: 0.004\n    },\n    sortOrder: Number\n  },\n  methods: {\n    /**\n     * ImageryLayer 初始化方式较为特殊，这儿覆盖重写 createCesiumObject 方法。\n     */\n    async createCesiumObject () {\n      const { $props, transformProps, requiredArg } = this\n      const options = transformProps($props)\n      return new Cesium.ImageryLayer(requiredArg || {}, options)\n    },\n    async mount () {\n      const { viewer, imageryLayer, sortOrder } = this\n      imageryLayer.sortOrder = sortOrder\n      viewer.imageryLayers.add(imageryLayer)\n      return !this.viewer.isDestroyed() && viewer.imageryLayers.contains(imageryLayer)\n    },\n    async unmount () {\n      const { viewer, imageryLayer } = this\n      return !viewer.isDestroyed() && viewer.imageryLayers.remove(imageryLayer)\n    },\n    setProvider (provider) {\n      if (undefined === provider) {\n        this.unmount()\n      } else {\n        this.imageryLayer._imageryProvider = provider\n        const listener = this.$listeners['update:imageryProvider']\n        if (listener) this.$emit('update:imageryProvider', provider)\n      }\n\n      return true\n    },\n    getServices () {\n      const vm = this\n      return mergeDescriptors(\n        cmp.methods.getServices.call(this),\n        {\n          get imageryLayer () { return vm.imageryLayer },\n          get providerContainer () { return vm }\n        }\n      )\n    }\n  },\n  stubVNode: {\n    attrs () {\n      return {\n        class: this.$options.name\n      }\n    }\n  },\n  created () {\n    this._provider = undefined\n    Object.defineProperties(this, {\n      imageryLayer: {\n        enumerable: true,\n        get: () => this.cesiumObject\n      },\n      requiredArg: {\n        enumerable: true,\n        get: () => this.imageryProvider || this._provider\n      }\n    })\n  }\n}\n</script>\n","import ImageryLayer from './ImageryLayer.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  Vue.component(ImageryLayer.name, ImageryLayer)\n}\n\nexport default plugin\n\nexport {\n  ImageryLayer,\n  plugin as install\n}\n"],"names":["name","mixins","cmp","cutoutRectangle","colorToAlpha","props","imageryProvider","Object","rectangle","alpha","type","Number","Function","default","brightness","contrast","hue","saturation","gamma","splitDirection","minificationFilter","magnificationFilter","show","Boolean","maximumAnisotropy","minimumTerrainLevel","maximumTerrainLevel","colorToAlphaThreshold","sortOrder","methods","createCesiumObject","$props","transformProps","requiredArg","options","Cesium","ImageryLayer","mount","viewer","imageryLayer","imageryLayers","add","isDestroyed","contains","unmount","remove","setProvider","provider","undefined","_imageryProvider","listener","$listeners","$emit","getServices","vm","mergeDescriptors","call","providerContainer","stubVNode","attrs","class","$options","created","_provider","defineProperties","enumerable","get","cesiumObject","plugin","Vue","installed","component"],"mappings":"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"}