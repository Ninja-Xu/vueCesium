{"version":3,"file":"VisibilityState.js","sources":["src/mixins/tool/VisibilityState.js"],"sourcesContent":["class VisibilityState {\n  constructor () {\n    this.states = new Cesium.ManagedArray()\n    this.count = 0\n  }\n\n  hidePrimitiveCollection (primitiveCollection) {\n    const { PrimitiveCollection, Cesium3DTileset, Model } = Cesium\n    const length = primitiveCollection.length\n    for (let i = 0; i < length; i++) {\n      const primitive = primitiveCollection.get(i)\n      if (primitive instanceof PrimitiveCollection) {\n        this.hidePrimitiveCollection(primitive)\n      } else {\n        this.states.push(primitive.show)\n        primitive instanceof Cesium3DTileset || primitive instanceof Model || (primitive.show = false)\n      }\n    }\n  }\n\n  restorePrimitiveCollection (primitiveCollection) {\n    const { PrimitiveCollection } = Cesium\n    const length = primitiveCollection.length\n    for (let i = 0; i < length; i++) {\n      const primitive = primitiveCollection.get(i)\n      if (primitive instanceof PrimitiveCollection) {\n        this.restorePrimitiveCollection(primitive)\n      } else {\n        primitive.show = this.states.get(this.count++)\n      }\n    }\n  }\n\n  hide (scene) {\n    this.states.length = 0\n    this.hidePrimitiveCollection(scene.primitives)\n    this.hidePrimitiveCollection(scene.groundPrimitives)\n  }\n\n  restore (scene) {\n    this.count = 0\n    this.restorePrimitiveCollection(scene.primitives)\n    this.restorePrimitiveCollection(scene.groundPrimitives)\n  }\n}\n\nexport default VisibilityState\n"],"names":["VisibilityState","states","Cesium","ManagedArray","count","primitiveCollection","PrimitiveCollection","Cesium3DTileset","Model","length","i","primitive","get","hidePrimitiveCollection","push","show","restorePrimitiveCollection","scene","primitives","groundPrimitives"],"mappings":";;;;;;;;;;;;;;IAAMA;AACJ,6BAAe;AAAA;;AACb,SAAKC,MAAL,GAAc,IAAIC,MAAM,CAACC,YAAX,EAAd;AACA,SAAKC,KAAL,GAAa,CAAb;AACD;;;;WAED,iCAAyBC,mBAAzB,EAA8C;AAC5C,oBAAwDH,MAAxD;AAAA,UAAQI,mBAAR,WAAQA,mBAAR;AAAA,UAA6BC,eAA7B,WAA6BA,eAA7B;AAAA,UAA8CC,KAA9C,WAA8CA,KAA9C;AACA,UAAMC,MAAM,GAAGJ,mBAAmB,CAACI,MAAnC;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4BC,CAAC,EAA7B,EAAiC;AAC/B,YAAMC,SAAS,GAAGN,mBAAmB,CAACO,GAApB,CAAwBF,CAAxB,CAAlB;;AACA,YAAIC,SAAS,YAAYL,mBAAzB,EAA8C;AAC5C,eAAKO,uBAAL,CAA6BF,SAA7B;AACD,SAFD,MAEO;AACL,eAAKV,MAAL,CAAYa,IAAZ,CAAiBH,SAAS,CAACI,IAA3B;AACAJ,UAAAA,SAAS,YAAYJ,eAArB,IAAwCI,SAAS,YAAYH,KAA7D,KAAuEG,SAAS,CAACI,IAAV,GAAiB,KAAxF;AACD;AACF;AACF;;;WAED,oCAA4BV,mBAA5B,EAAiD;AAC/C,qBAAgCH,MAAhC;AAAA,UAAQI,mBAAR,YAAQA,mBAAR;AACA,UAAMG,MAAM,GAAGJ,mBAAmB,CAACI,MAAnC;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4BC,CAAC,EAA7B,EAAiC;AAC/B,YAAMC,SAAS,GAAGN,mBAAmB,CAACO,GAApB,CAAwBF,CAAxB,CAAlB;;AACA,YAAIC,SAAS,YAAYL,mBAAzB,EAA8C;AAC5C,eAAKU,0BAAL,CAAgCL,SAAhC;AACD,SAFD,MAEO;AACLA,UAAAA,SAAS,CAACI,IAAV,GAAiB,KAAKd,MAAL,CAAYW,GAAZ,CAAgB,KAAKR,KAAL,EAAhB,CAAjB;AACD;AACF;AACF;;;WAED,cAAMa,KAAN,EAAa;AACX,WAAKhB,MAAL,CAAYQ,MAAZ,GAAqB,CAArB;AACA,WAAKI,uBAAL,CAA6BI,KAAK,CAACC,UAAnC;AACA,WAAKL,uBAAL,CAA6BI,KAAK,CAACE,gBAAnC;AACD;;;WAED,iBAASF,KAAT,EAAgB;AACd,WAAKb,KAAL,GAAa,CAAb;AACA,WAAKY,0BAAL,CAAgCC,KAAK,CAACC,UAAtC;AACA,WAAKF,0BAAL,CAAgCC,KAAK,CAACE,gBAAtC;AACD;;;;;;;;"}