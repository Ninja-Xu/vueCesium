{"version":3,"file":"cesiumHelpers.js","sources":["src/utils/cesiumHelpers.js"],"sourcesContent":["import { isFunction, isArray, isString, isObject, isEmptyObj } from './util'\n/**\n * 将对象或数组转换为 Cesium.Cartesian2\n * @param {Object} val\n * @returns {Cartesian2 | CallbackProperty} 返回 Cartesian2 或者 CallbackProperty\n * @example\n * const options = [100, 100]\n * // const options = [x: 100, y: 100]\n * const position = makeCartesian2(options)\n */\nexport function makeCartesian2 (val, isConstant = false) {\n  const { Cartesian2, CallbackProperty } = Cesium\n\n  if (val instanceof Cartesian2) {\n    return val\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'x')) {\n    return new Cartesian2(val.x, val.y)\n  }\n\n  if (isArray(val)) {\n    return new Cartesian2(val[0], val[1])\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n  return val\n}\n\n/**\n * 将对象或者数组转换为 Cesium.Cartesian3\n * @param {Object} val 传入的对象或数组\n * @param {Boolean} isConstant 传入function时生效，true 代表回调 function 每时每刻都返回值， false 代表改变才会返回值。默认false。\n * @returns 返回 Cartesian3 或者 CallbackProperty\n * @example\n * const options = {\n *  lng: 108,\n *  lat: 35,\n *  height: 1000\n * }\n * // const options = [108, 35, 1000]\n * const position = makeCartesian3 (options) // return Cesium.Cartesian3\n */\nexport function makeCartesian3 (val, ellipsoid, isConstant = false) {\n  const { CallbackProperty, Cartesian3, Ellipsoid } = Cesium\n\n  if (val instanceof Cartesian3) {\n    return val\n  }\n\n  ellipsoid = ellipsoid || Ellipsoid.WGS84\n\n  if (isObject(val)) {\n    if (Object.prototype.hasOwnProperty.call(val, 'x')) {\n      return new Cartesian3(val.x, val.y, val.z || 0)\n    } else if (Object.prototype.hasOwnProperty.call(val, 'lng')) {\n      return Cartesian3.fromDegrees(val.lng, val.lat, val.height || 0, ellipsoid)\n    }\n  }\n\n  if (isArray(val)) {\n    return new Cartesian3(val[0], val[1], val[2] || 0)\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n\n/**\n * 将数组 [lng, lat, height, ……，lng, lat, height] 转换为 Cesium.Cartesian3 数组\n * @param {Array} val\n * @returns {Array<Cartesian3>}\n */\nexport function makeCartesian3Array (vals, ellipsoid, isConstant = false) {\n  const { CallbackProperty, Cartesian3, Ellipsoid } = Cesium\n  if (isArray(vals)) {\n    if (vals[0] instanceof Cartesian3 || vals._callback) {\n      return vals\n    }\n\n    ellipsoid = ellipsoid || Ellipsoid.WGS84\n\n    if (isArray(vals[0])) {\n      const coordinates = []\n      for (let i = 0; i < vals.length; i++) {\n        coordinates.push(vals[i][0])\n        coordinates.push(vals[i][1])\n        coordinates.push(vals[i][2] || 0)\n      }\n      return Cartesian3.fromRadiansArrayHeights(coordinates, ellipsoid)\n    } else if (isObject(vals[0])) {\n      const coordinates = []\n      if (vals[0].lng) {\n        vals.forEach((item) => {\n          coordinates.push(item.lng)\n          coordinates.push(item.lat)\n          coordinates.push(item.height || 0)\n        })\n        return Cartesian3.fromDegreesArrayHeights(coordinates, ellipsoid)\n      } else {\n        if (vals[0].x) {\n          vals.forEach((item) => {\n            coordinates.push(item.x)\n            coordinates.push(item.y)\n            coordinates.push(item.z || 0)\n          })\n          return Cartesian3.fromRadiansArrayHeights(coordinates, ellipsoid)\n        }\n      }\n    }\n\n    return Cartesian3.fromDegreesArrayHeights(vals, ellipsoid)\n  }\n\n  if (isFunction(vals)) {\n    return new CallbackProperty(vals, isConstant)\n  }\n\n  return vals\n}\n\n/**\n * 将形如 [lng, lat, ……，lng, lat] 数组转换为 Cesium.Cartesian2 数组\n * @param {Array} vals\n * @returns {Array<Cartesian2>}\n */\nexport function makeCartesian2Array (vals, isConstant) {\n  const { CallbackProperty, Cartesian2 } = Cesium\n\n  if (isArray(vals)) {\n    if (vals[0] instanceof Cartesian2 || vals._callback) {\n      return vals\n    }\n\n    if (isObject(vals[0])) {\n      const cartesian2Array = []\n      vals.forEach((item) => {\n        cartesian2Array.push(new Cartesian2(item.x, item.y))\n      })\n      return cartesian2Array\n    }\n  }\n\n  if (isFunction(vals)) {\n    return new CallbackProperty(vals, isConstant)\n  }\n\n  return vals\n}\n\n/**\n * 将对象或数组 转换为 Cesium.Quaternion\n * @param {Object} val\n * @example\n * const options = {x: 0, y: 0, z: 0, w: 0}\n * // const options = [0, 0, 0, 0]\n * const orientation = makeQuaternion(options) // returns Cesium.Quaternion\n */\nexport function makeQuaternion (val, isConstant = false) {\n  const { CallbackProperty, Quaternion } = Cesium\n\n  if (val instanceof Quaternion) {\n    return val\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'x')) {\n    return new Quaternion(val.x, val.y, val.z, val.w)\n  }\n\n  if (isArray(val)) {\n    return new Quaternion(val[0], val[1], val[2], val[3])\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n\n/**\n * 解析 HierarchyJson\n * @param {Object} val\n */\nfunction parsePolygonHierarchyJson (val, ellipsoid) {\n  val.forEach((element) => {\n    element.positions = makeCartesian3Array(element.positions, ellipsoid)\n    if (element.holes) {\n      parsePolygonHierarchyJson(element.holes, ellipsoid)\n    }\n  })\n}\n\n/**\n * 普通数组或对象转 Cesium.PolygonHierarchy 对象。\n * @param {Object|Array} val\n */\nexport function makePolygonHierarchy (val, ellipsoid, isConstant = false) {\n  const { PolygonHierarchy, CallbackProperty } = Cesium\n\n  if (val instanceof PolygonHierarchy) {\n    return val\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  if (isArray(val) && val.length >= 3) {\n    return new PolygonHierarchy(makeCartesian3Array(val, ellipsoid))\n  }\n  if (Cesium.defined(val.positions)) {\n    val.positions = makeCartesian3Array(val.positions, ellipsoid)\n    parsePolygonHierarchyJson(val.holes, ellipsoid)\n  }\n\n  return val\n}\n\n/**\n * 对象或数组转 Cesium.NearFarScalar。\n * @param {Object} val\n * @returns {NearFarScalar}\n * @example\n * const options = {near: 1000, nearValue: 1.0, far: 10000, farValue: 0.5}\n * // const options = [1000, 1.0, 10000, 1.5]\n * const nearFarScalar = makeNearFarScalar(options)\n */\nexport function makeNearFarScalar (val, isConstant = false) {\n  const { NearFarScalar, CallbackProperty } = Cesium\n\n  if (val instanceof NearFarScalar) {\n    return val\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'near')) {\n    return new NearFarScalar(val.near, val.nearValue, val.far, val.farValue)\n  }\n\n  if (isArray(val)) {\n    return new NearFarScalar(val[0], val[1], val[2], val[3])\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n/**\n * 对象或数组转 Cesium.DistanceDisplayCondition。\n * @param {Object} val\n * @returns {DistanceDisplayCondition}\n * @example\n * const options = [0, 1000]\n * // const options = {near: 0, far: 1000}\n * const distanceDisplayCondition = makeDistanceDisplayCondition(options) // return Cesium.DistanceDisplayCondition\n */\nexport function makeDistanceDisplayCondition (val, isConstant = false) {\n  const { DistanceDisplayCondition, CallbackProperty } = Cesium\n\n  if (val instanceof DistanceDisplayCondition) {\n    return val\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'near')) {\n    return new DistanceDisplayCondition(val.near, val.far)\n  }\n\n  if (isArray(val)) {\n    return new DistanceDisplayCondition(val[0], val[1])\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n\n/**\n * 普通对象、数组或字符串转 Cesium.Color。\n * @param {String|Array|Object|Function} val\n * @returns {Color}\n * @example\n * const options = 'red'\n * // const options = [1, 0, 0, 1.0] // r g b a\n * // const options = {red: 255, green: 0, bule: 0, alpha: 255}\n * const color = makeColor(options) // return Cesium.Color\n */\nexport function makeColor (val, isConstant = false) {\n  const { Color, CallbackProperty } = Cesium\n\n  if (val instanceof Color) {\n    return val\n  }\n\n  if (isString(val)) {\n    return Color.fromCssColorString(val)\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'red')) {\n    return Color.fromBytes(val.red, val.green, val.blue, val.alpha || 255)\n  }\n\n  if (isArray(val)) {\n    return new Cesium.Color(val[0], val[1], val[2], val[3] || 1.0)\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n}\n\n/**\n * 普通对象或数组 [r, g, b, a] 或字符串转 MaterialProperty\n * @param {String|Array|Object} val\n */\nexport function makeMaterialProperty (val, isConstant = false) {\n  const {\n    CallbackProperty,\n    Color,\n    Resource,\n    ColorMaterialProperty,\n    ImageMaterialProperty,\n    PolylineArrowMaterialProperty,\n    PolylineDashMaterialProperty,\n    PolylineGlowMaterialProperty,\n    PolylineOutlineMaterialProperty,\n    CheckerboardMaterialProperty,\n    GridMaterialProperty,\n    StripeMaterialProperty\n  } = Cesium\n\n  if (\n    /(.*)\\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(val) ||\n    val instanceof Resource ||\n    val instanceof HTMLCanvasElement ||\n    val instanceof HTMLVideoElement\n  ) {\n    const result = new ImageMaterialProperty({\n      image: val,\n      repeat: makeCartesian2({ x: 1.0, y: 1.0 }),\n      color: Color.WHITE,\n      transparent: true\n    })\n    result.image = val\n    return result\n  }\n\n  if (isArray(val) || isString(val)) {\n    return new ColorMaterialProperty(makeColor(val))\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'fabric')) {\n    switch (val.fabric.type) {\n      case 'Image':\n        return new ImageMaterialProperty({\n          image: val.fabric.uniforms.image,\n          repeat: val.fabric.uniforms.repeat || makeCartesian2({ x: 1.0, y: 1.0 }),\n          color: makeColor(val.fabric.uniforms.color) || Color.WHITE,\n          transparent: val.fabric.uniforms.transparent || false\n        })\n      case 'Color':\n        return new ColorMaterialProperty(makeColor(val.fabric.uniforms.color || Color.WHITE))\n      case 'PolylineArrow':\n        return new PolylineArrowMaterialProperty(makeColor(val.fabric.uniforms.color || Color.WHITE))\n      case 'PolylineDash':\n        return new PolylineDashMaterialProperty({\n          color: makeColor(val.fabric.uniforms.color) || Color.WHITE,\n          gapColor: val.fabric.uniforms.gapColor || Color.TRANSPARENT,\n          dashLength: val.fabric.uniforms.taperPower || 16.0,\n          dashPattern: val.fabric.uniforms.taperPower || 255.0\n        })\n      case 'PolylineGlow':\n        return new PolylineGlowMaterialProperty({\n          color: makeColor(val.fabric.uniforms.color) || Color.WHITE,\n          glowPower: val.fabric.uniforms.glowPower || 0.25,\n          taperPower: val.fabric.uniforms.taperPower || 1.0\n        })\n      case 'PolylineOutline':\n        return new PolylineOutlineMaterialProperty({\n          color: makeColor(val.fabric.uniforms.color) || Color.WHITE,\n          outlineColor: val.fabric.uniforms.outlineColor || Color.BLACK,\n          outlineWidth: val.fabric.uniforms.outlineWidth || 1.0\n        })\n      case 'Checkerboard':\n        return new CheckerboardMaterialProperty({\n          evenColor: makeColor(val.fabric.uniforms.evenColor) || Color.WHITE,\n          oddColor: val.fabric.uniforms.oddColor || Color.BLACK,\n          repeat: val.fabric.uniforms.repeat || makeCartesian2({ x: 2, y: 2 })\n        })\n      case 'Grid':\n        return new GridMaterialProperty({\n          color: makeColor(val.fabric.uniforms.color) || Color.WHITE,\n          cellAlpha: val.fabric.uniforms.cellAlpha || 0.1,\n          lineCount: val.fabric.uniforms.lineCount || makeCartesian2({ x: 8, y: 8 }),\n          lineThickness: val.fabric.uniforms.lineThickness || makeCartesian2({ x: 1, y: 1 }),\n          lineOffset: val.fabric.uniforms.lineOffset || makeCartesian2({ x: 0, y: 0 })\n        })\n      case 'Stripe':\n        return new StripeMaterialProperty({\n          orientation: makeColor(val.fabric.uniforms.orientation) || 0,\n          evenColor: val.fabric.uniforms.evenColor || Color.WHITE,\n          oddColor: val.fabric.uniforms.oddColor || Color.BLACK,\n          offset: val.fabric.uniforms.offset || 0,\n          repeat: val.fabric.uniforms.repeat || 1\n        })\n    }\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n\n/**\n * 转 Material\n * @param {String|Array|Object} val\n */\nexport function makeMaterial (val) {\n  const cmpName = this.$options.name\n  if (cmpName && (cmpName.indexOf('graphics') !== -1 || cmpName.indexOf('datasource') !== -1)) {\n    return makeMaterialProperty(val)\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'fabric')) {\n    const f = (obj) => {\n      for (const i in obj) {\n        if (!isArray(obj[i]) && isObject(obj[i])) {\n          f(obj[i])\n        } else {\n          if (i.toLocaleLowerCase().indexOf('color') !== -1 && !isEmptyObj(obj[i])) {\n            const result = makeColor(obj[i])\n            // Cesium 通过对象属性个数判断具体材质类型的，通过 Cesium.combine 移除 vue 传的一些属性\n            obj[i] = Cesium.combine(result, result, true)\n          }\n        }\n      }\n    }\n    f(val)\n    return new Cesium.Material(val)\n  }\n\n  if (isArray(val) || isString(val)) {\n    const material = Cesium.Material.fromType('Color')\n    material.uniforms.color = makeColor(val)\n    return material\n  }\n\n  return undefined\n}\n\n/**\n * 将对象 {west: number, south: number, east: number, north: number} 或者[west, south, east, north]数组 转 Cesium.Rectangle 对象。\n * @param {Object} val\n * @returns {Rectangle}\n */\nexport function makeRectangle (val, isConstant = false) {\n  const { Rectangle, RectangleGraphics, CallbackProperty } = Cesium\n\n  // Entiy 的 rectangle 属性不能调用这个方法\n  if (val instanceof RectangleGraphics) {\n    return val\n  }\n\n  if (val instanceof Rectangle) {\n    return val\n  }\n\n  if (isArray(val)) {\n    return Rectangle.fromDegrees(val[0], val[1], val[2], val[3])\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'west')) {\n    return Rectangle.fromDegrees(val.west, val.south, val.east, val.north)\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n\n/**\n * 对象或数组转 Cesium.BoundingRectangle。\n * @param {Object} val\n * @returns {Cesium.BoundingRectangle}\n * @example\n * const options = [0, 0, 100, 100]\n * // const options = {x: 0, y: 0, width: 100, height: 100}\n * const boundingRectangle = makeBoundingRectangle(options)\n */\nexport function makeBoundingRectangle (val, isConstant = false) {\n  const { BoundingRectangle, CallbackProperty } = Cesium\n\n  if (val instanceof BoundingRectangle) {\n    return val\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'x')) {\n    return new BoundingRectangle(val.x, val.y, val.width, val.height)\n  }\n\n  if (isArray) {\n    return new BoundingRectangle(val[0], val[1], val[2], val[3])\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n\n/**\n * 普通对象 {normal: number, distance: number} 转 Cesium.Plane 对象。\n * @param {Object} val\n * @returns {Plane}\n */\nexport function makePlane (val, isConstant = false) {\n  const { Cartesian3, Plane, PlaneGraphics, CallbackProperty } = Cesium\n\n  // Entiy 和 PlaneGraphics 都有个 plane 属性 要区别一下\n  if (val instanceof PlaneGraphics) {\n    return val\n  }\n\n  if (val instanceof Plane) {\n    return val\n  }\n\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'normal')) {\n    Cartesian3.normalize(makeCartesian3(val.normal), val.normal)\n    return new Plane(val.normal, val.distance)\n  }\n\n  if (isFunction(val)) {\n    return new CallbackProperty(val, isConstant)\n  }\n\n  return val\n}\n\n/**\n * 普通对象转平移、旋转、缩放变换对象。\n * @param {*} val\n */\nexport function makeTranslationRotationScale (val) {\n  if (isObject(val) && Object.prototype.hasOwnProperty.call(val, 'translation')) {\n    return new Cesium.TranslationRotationScale(\n      makeCartesian3(val.translation),\n      makeQuaternion(val.rotation),\n      makeCartesian3(val.scale)\n    )\n  }\n  return val\n}\n\nexport function makeOptions (val) {\n  const cmpName = this.$options.name\n  const result = {}\n  switch (cmpName) {\n    case 'vc-datasource-geojson':\n      Object.assign(result, val)\n      result && result.markerColor && (result.markerColor = makeColor(result.markerColor))\n      result && result.stroke && (result.stroke = makeColor(result.stroke))\n      result && result.fill && (result.fill = makeColor(result.fill))\n      return result\n  }\n  return val\n}\n"],"names":["makeCartesian2","val","isConstant","Cesium","Cartesian2","CallbackProperty","isObject","Object","prototype","hasOwnProperty","call","x","y","isArray","isFunction","makeCartesian3","ellipsoid","Cartesian3","Ellipsoid","WGS84","z","fromDegrees","lng","lat","height","makeCartesian3Array","vals","_callback","coordinates","i","length","push","fromRadiansArrayHeights","forEach","item","fromDegreesArrayHeights","makeCartesian2Array","cartesian2Array","makeQuaternion","Quaternion","w","parsePolygonHierarchyJson","element","positions","holes","makePolygonHierarchy","PolygonHierarchy","defined","makeNearFarScalar","NearFarScalar","near","nearValue","far","farValue","makeDistanceDisplayCondition","DistanceDisplayCondition","makeColor","Color","isString","fromCssColorString","fromBytes","red","green","blue","alpha","makeMaterialProperty","Resource","ColorMaterialProperty","ImageMaterialProperty","PolylineArrowMaterialProperty","PolylineDashMaterialProperty","PolylineGlowMaterialProperty","PolylineOutlineMaterialProperty","CheckerboardMaterialProperty","GridMaterialProperty","StripeMaterialProperty","test","HTMLCanvasElement","HTMLVideoElement","result","image","repeat","color","WHITE","transparent","fabric","type","uniforms","gapColor","TRANSPARENT","dashLength","taperPower","dashPattern","glowPower","outlineColor","BLACK","outlineWidth","evenColor","oddColor","cellAlpha","lineCount","lineThickness","lineOffset","orientation","offset","makeMaterial","cmpName","$options","name","indexOf","f","obj","toLocaleLowerCase","isEmptyObj","combine","Material","material","fromType","undefined","makeRectangle","Rectangle","RectangleGraphics","west","south","east","north","makeBoundingRectangle","BoundingRectangle","width","makePlane","Plane","PlaneGraphics","normalize","normal","distance","makeTranslationRotationScale","TranslationRotationScale","translation","rotation","scale","makeOptions","markerColor","stroke","fill"],"mappings":"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"}