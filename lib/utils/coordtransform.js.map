{"version":3,"file":"coordtransform.js","sources":["src/utils/coordtransform.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Created by Wandergis on 2015/7/8. coordtransform.js@2.1.2\n * 提供了百度坐标（BD-09）、国测局坐标（火星坐标，GCJ-02）、和 WGS-84 坐标系之间的转换\n * https://github.com/wandergis/coordtransform\n */\n// 定义一些常量\nconst x_PI = (3.14159265358979324 * 3000.0) / 180.0\nconst PI = 3.1415926535897932384626\nconst a = 6378245.0\nconst ee = 0.00669342162296594323\n/**\n * 百度坐标系 (BD-09) 与 火星坐标系 (GCJ-02) 的转换\n * 即 百度 转 谷歌、高德\n * @param bd_lng\n * @param bd_lat\n * @returns {*[]}\n */\nconst bd09togcj02 = function bd09togcj02 (bd_lng, bd_lat) {\n  var bd_lng = +bd_lng\n  var bd_lat = +bd_lat\n  const x = bd_lng - 0.0065\n  const y = bd_lat - 0.006\n  const z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_PI)\n  const theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_PI)\n  const gg_lng = z * Math.cos(theta)\n  const gg_lat = z * Math.sin(theta)\n  return [gg_lng, gg_lat]\n}\n\n/**\n * 火星坐标系 (GCJ-02) 与百度坐标系 (BD-09) 的转换\n * 即 谷歌、高德 转 百度\n * @param lng\n * @param lat\n * @returns {*[]}\n */\nconst gcj02tobd09 = function gcj02tobd09 (lng, lat) {\n  var lat = +lat\n  var lng = +lng\n  const z = Math.sqrt(lng * lng + lat * lat) + 0.00002 * Math.sin(lat * x_PI)\n  const theta = Math.atan2(lat, lng) + 0.000003 * Math.cos(lng * x_PI)\n  const bd_lng = z * Math.cos(theta) + 0.0065\n  const bd_lat = z * Math.sin(theta) + 0.006\n  return [bd_lng, bd_lat]\n}\n\n/**\n * WGS-84 转 GCJ-02\n * @param lng\n * @param lat\n * @returns {*[]}\n */\nconst wgs84togcj02 = function wgs84togcj02 (lng, lat) {\n  var lat = +lat\n  var lng = +lng\n  if (out_of_china(lng, lat)) {\n    return [lng, lat]\n  } else {\n    let dlat = transformlat(lng - 105.0, lat - 35.0)\n    let dlng = transformlng(lng - 105.0, lat - 35.0)\n    const radlat = (lat / 180.0) * PI\n    let magic = Math.sin(radlat)\n    magic = 1 - ee * magic * magic\n    const sqrtmagic = Math.sqrt(magic)\n    dlat = (dlat * 180.0) / (((a * (1 - ee)) / (magic * sqrtmagic)) * PI)\n    dlng = (dlng * 180.0) / ((a / sqrtmagic) * Math.cos(radlat) * PI)\n    const mglat = lat + dlat\n    const mglng = lng + dlng\n    return [mglng, mglat]\n  }\n}\n\n/**\n * GCJ-02 转换为 WGS-84\n * @param lng\n * @param lat\n * @returns {*[]}\n */\nconst gcj02towgs84 = function gcj02towgs84 (lng, lat) {\n  var lat = +lat\n  var lng = +lng\n  if (out_of_china(lng, lat)) {\n    return [lng, lat]\n  } else {\n    let dlat = transformlat(lng - 105.0, lat - 35.0)\n    let dlng = transformlng(lng - 105.0, lat - 35.0)\n    const radlat = (lat / 180.0) * PI\n    let magic = Math.sin(radlat)\n    magic = 1 - ee * magic * magic\n    const sqrtmagic = Math.sqrt(magic)\n    dlat = (dlat * 180.0) / (((a * (1 - ee)) / (magic * sqrtmagic)) * PI)\n    dlng = (dlng * 180.0) / ((a / sqrtmagic) * Math.cos(radlat) * PI)\n    const mglat = lat + dlat\n    const mglng = lng + dlng\n    return [lng * 2 - mglng, lat * 2 - mglat]\n  }\n}\n\nvar transformlat = function transformlat (lng, lat) {\n  var lat = +lat\n  var lng = +lng\n  let ret = -100.0 + 2.0 * lng + 3.0 * lat + 0.2 * lat * lat + 0.1 * lng * lat + 0.2 * Math.sqrt(Math.abs(lng))\n  ret += ((20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0) / 3.0\n  ret += ((20.0 * Math.sin(lat * PI) + 40.0 * Math.sin((lat / 3.0) * PI)) * 2.0) / 3.0\n  ret += ((160.0 * Math.sin((lat / 12.0) * PI) + 320 * Math.sin((lat * PI) / 30.0)) * 2.0) / 3.0\n  return ret\n}\n\nvar transformlng = function transformlng (lng, lat) {\n  var lat = +lat\n  var lng = +lng\n  let ret = 300.0 + lng + 2.0 * lat + 0.1 * lng * lng + 0.1 * lng * lat + 0.1 * Math.sqrt(Math.abs(lng))\n  ret += ((20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0) / 3.0\n  ret += ((20.0 * Math.sin(lng * PI) + 40.0 * Math.sin((lng / 3.0) * PI)) * 2.0) / 3.0\n  ret += ((150.0 * Math.sin((lng / 12.0) * PI) + 300.0 * Math.sin((lng / 30.0) * PI)) * 2.0) / 3.0\n  return ret\n}\n\n/**\n * 判断是否在国内，不在国内则不做偏移\n * @param lng\n * @param lat\n * @returns {boolean}\n */\nvar out_of_china = function out_of_china (lng, lat) {\n  var lat = +lat\n  var lng = +lng\n  // 纬度 3.86~53.55, 经度 73.66~135.05\n  return !(lng > 73.66 && lng < 135.05 && lat > 3.86 && lat < 53.55)\n}\n\n\nexport { bd09togcj02, gcj02tobd09, wgs84togcj02, gcj02towgs84}\n"],"names":["x_PI","PI","a","ee","bd09togcj02","bd_lng","bd_lat","x","y","z","Math","sqrt","sin","theta","atan2","cos","gg_lng","gg_lat","gcj02tobd09","lng","lat","wgs84togcj02","out_of_china","dlat","transformlat","dlng","transformlng","radlat","magic","sqrtmagic","mglat","mglng","gcj02towgs84","ret","abs"],"mappings":"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"}